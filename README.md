# DevTUI
<!-- START_SECTION:BADGES_SECTION -->
<a href="docs/img/badges.svg"><img src="docs/img/badges.svg" alt="Project Badges" title="Generated by badges.sh from github.com/cdvelop/devscripts"></a>
<!-- END_SECTION:BADGES_SECTION -->

Interactive Terminal User Interface library for Go applications development (principal tui in [**GoDEV** App](https://github.com/cdvelop/godev))

![devtui](tui.jpg)

## Quick Start

DevTUI uses a handler-based architecture where fields implement the `FieldHandler` interface for automatic async operations and message tracking.

```go
package main

import (
    "fmt"
    "strings"
    "sync"
    "time"
    "github.com/cdvelop/devtui"
)

// Handler implementing both interfaces
type HostHandler struct {
    currentHost string
    lastOpID    string
}

// WritingHandler methods
func (h *HostHandler) Name() string { return "HostHandler" }
func (h *HostHandler) SetLastOperationID(id string) { h.lastOpID = id }
func (h *HostHandler) GetLastOperationID() string { return h.lastOpID }

// FieldHandler methods  
func (h *HostHandler) Label() string { return "Host" }
func (h *HostHandler) Value() string { return h.currentHost }
func (h *HostHandler) Editable() bool { return true }
func (h *HostHandler) Timeout() time.Duration { return 5 * time.Second }
func (h *HostHandler) Change(newValue any) (string, error) {
    host := strings.TrimSpace(newValue.(string))
    if host == "" {
        return "", fmt.Errorf("host cannot be empty")
    }
    time.Sleep(1 * time.Second) // Async operation
    h.currentHost = host
    return fmt.Sprintf("Host configured: %s", host), nil
}

func main() {
    tui := devtui.NewTUI(&devtui.TuiConfig{
        AppName: "MyApp",
        ExitChan: make(chan bool),
    })
    
    tui.NewTabSection("Server", "Configuration").
        NewField(&HostHandler{currentHost: "localhost"})

    var wg sync.WaitGroup
    wg.Add(1)
    go tui.Start(&wg)
    wg.Wait()
}
```

## Interfaces

```go
type FieldHandler interface {
    WritingHandler                         // Embedded for message tracking
    Label() string                         // Field display name
    Value() string                         // Current field value
    Editable() bool                       // true=input, false=action
    Change(newValue any) (string, error)  // Handle changes/actions
    Timeout() time.Duration               // Operation timeout
}

type WritingHandler interface {
    Name() string                          // Handler identifier
    SetLastOperationID(id string)         // Set operation ID
    GetLastOperationID() string           // Get operation ID
}
```

## Navigation
- **Tab/Shift+Tab**: Switch between tabs
- **Left/Right**: Navigate fields within tab  
- **Enter**: Edit/Execute
- **Esc**: Cancel edit
- **Ctrl+C**: Exit

## Documentation
- [Advanced Examples](docs/EXAMPLES.md) - Multiple handlers and complex scenarios
- [Migration Guide](docs/MIGRATION_GUIDE.md) - Update existing handlers
