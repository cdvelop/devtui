# DevTUI
<!-- START_SECTION:BADGES_SECTION -->
<a href="docs/img/badges.svg"><img src="docs/img/badges.svg" alt="Project Badges" title="Generated by badges.sh from github.com/cdvelop/devscripts"></a>
<!-- END_SECTION:BADGES_SECTION -->

Interactive Terminal User Interface library for Go applications development (principal tui in [**GoDEV** App](https://github.com/cdvelop/godev))

![devtui](tui.jpg)

## Quick Start

DevTUI uses specialized handler interfaces that require minimal implementation. Here's a complete example with message tracking:

```go
// HandlerExecution with MessageTracker - Action buttons with progress tracking
type BackupHandler struct {
    lastOpID string
}

func (h *BackupHandler) Name() string  { return "SystemBackup" }
func (h *BackupHandler) Label() string { return "Create System Backup" }
func (h *BackupHandler) Execute(progress ...func(string)) error {
    if len(progress) > 0 {
        progress[0]("Preparing backup...")
        time.Sleep(200 * time.Millisecond)
        progress[0]("Backing up database...")
        time.Sleep(500 * time.Millisecond)
        progress[0]("Backing up files...")
        time.Sleep(300 * time.Millisecond)
        progress[0]("Backup completed successfully")
    }
    return nil
}

// MessageTracker implementation for operation tracking
func (h *BackupHandler) GetLastOperationID() string   { return h.lastOpID }
func (h *BackupHandler) SetLastOperationID(id string) { h.lastOpID = id }

func main() {
    tui := devtui.NewTUI(&devtui.TuiConfig{
        AppName:  "Backup Demo",
        ExitChan: make(chan bool),
    })

    // Operations tab with ExecutionHandlers (action buttons)
    ops := tui.NewTabSection("Operations", "System Operations")
    ops.NewExecutionHandlerTracking(&BackupHandler{}).WithTimeout(5 * time.Second)

    var wg sync.WaitGroup
    wg.Add(1)
    go tui.Start(&wg)
    wg.Wait()
}
```

ðŸ‘‰ **[See complete example with all handler types](example/demo/main.go)**

## Handler Interfaces

DevTUI provides 5 specialized handler types, each requiring minimal implementation:

### 1. HandlerDisplay - Read-only Information (3 methods)
```go
type HandlerDisplay interface {
    Name() string    // Unique identifier for logging
    Label() string   // Display label in footer
    Content() string // Content shown immediately
}
```

### 2. HandlerEdit - Interactive Input Fields (4 methods)  
```go
type HandlerEdit interface {
    Name() string    // Unique identifier for logging
    Label() string   // Field label
    Value() string   // Current/initial value
    Change(newValue any, progress ...func(string)) error
}
```

### 3. HandlerExecution - Action Buttons (3 methods)
```go
type HandlerExecution interface {
    Name() string  // Unique identifier for logging
    Label() string // Button label
    Execute(progress ...func(string)) error
}
```

### 4. HandlerWriter - Simple Logging (1 method)
```go
type HandlerWriter interface {
    Name() string // Writer identifier
}
```

### 5. HandlerTrackerWriter - Advanced Logging (3 methods)
```go
type HandlerTrackerWriter interface {
    Name() string
    MessageTracker
}

type MessageTracker interface {
    GetLastOperationID() string
    SetLastOperationID(id string)
}
```

## Registration Methods

```go
// Basic handlers
tab.NewDisplayHandler(handler).Register()
tab.NewEditHandler(handler).WithTimeout(5*time.Second)
tab.NewExecutionHandler(handler).WithTimeout(10*time.Second)

// Handlers with tracking (can update existing messages)
tab.NewEditHandlerWithTracking(handlerWithTracker).WithTimeout(5*time.Second)
tab.NewExecutionHandlerTracking(handlerWithTracker).WithTimeout(10*time.Second)

// Writers
tab.NewWriterHandler(handler).Register()
tab.NewWriterHandlerTracking(handlerWithTracker).Register()

// Direct writer registration (auto-detects tracking)
writer := tab.RegisterHandlerWriter(basicWriter)
writer := tab.RegisterHandlerTrackerWriter(trackerWriter)
```

## Key Features

- **Minimal Implementation**: 1-4 methods per handler (vs 8 in previous versions)
- **Specialized Interfaces**: Clear separation by purpose (Display, Edit, Execution, Writing)
- **Progress Callbacks**: Real-time feedback for long-running operations
- **Message Tracking**: Update existing messages instead of creating new ones
- **Method Chaining**: Clean timeout configuration with `.WithTimeout(duration)`
- **Thread-Safe**: Concurrent handler registration and execution

## Navigation
- **Tab/Shift+Tab**: Switch between tabs
- **Left/Right**: Navigate fields within tab  
- **Enter**: Edit/Execute
- **Esc**: Cancel edit
- **Ctrl+C**: Exit

**Note**: DevTUI automatically loads a built-in [ShortcutsHandler](shortcuts.go) at position 0 in the first tab, which displays detailed keyboard navigation commands. This handler demonstrates the `HandlerDisplay` interface and provides interactive help within the application.

## Documentation

- **[Complete API Specification](docs/API_ANYHANDLER_FINAL.md)** - Final API design and interfaces

## [Contributing](docs/CONTRIBUTING.md)